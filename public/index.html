<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Herkut</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<body>
    <center>

        <h1>Herkkuja</h1>
        <div id="sisältö">
    </div>
    <script>
        async function fetchData()
        {
            document.getElementById("sisältö").innerHTML = "<h4>Ladataan herkkuja...</hr>"

            var x = `<table><thead><th>Herkun nimi</th><th>tuotekoodi</th></thead><tbody>`
            try{
            
                const response = await fetch("http://localhost:3001/api/herkut")
                const herkkudata = await response.json()
                await herkkudata.map(h=>{
                    x += `<tr><td>${h.name}</td> <td>${h.id}</td></tr>`
                    })
                
                x += `</tbody></table>`
                document.getElementById("sisältö").innerHTML = x
                } 
                catch (error) {
                    console.error("Error fetching data:",error)
                }
        }
        fetchData()

    </script>
</center>
</body>
</html>